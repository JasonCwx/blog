<!DOCTYPE html>
<html lang="en">
<head>
    <title>Jason's Blog</title>

    <!-- meta -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- css -->
    <link rel="stylesheet" href="__STATIC__/index/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link rel="stylesheet" href="__STATIC__/index/css/pace.css">
    <link rel="stylesheet" href="__STATIC__/index/css/custom.css">

    <!-- js -->
    <script src="__STATIC__/index/js/jquery-2.1.3.min.js"></script>
    <script src="__STATIC__/index/js/bootstrap.min.js"></script>
    <script src="__STATIC__/index/js/pace.min.js"></script>
    <script src="__STATIC__/index/js/modernizr.custom.js"></script>

</head>
<body>
<div class="container">
    <div class="form">
        <h3>注册</h3>
        <form action="{:url('register/add')}" method="post">
            <div class="form-group">
                <em style="color: red;">*</em>
                <label for="username">用户名：</label>
                <input type="text" class="form-control" onblur="check_value('{:url('api/user/checkUserName')}', '#username')" id="username" name="username" placeholder="请输入用户名">
            </div>
            <div class="form-group">
                <em style="color: red;">*</em>
                <label for="name">昵称：</label>
                <input type="text" class="form-control" id="name" name="name" placeholder="请输入昵称">
            </div>
            <div class="form-group">
                <em style="color: red;">*</em>
                <label for="password">密码：</label>
                <input type="password" class="form-control" id="password" name="password">
            </div>
            <div class="form-group">
                <em style="color: red;">*</em>
                <label for="re_password">确认密码：</label>
                <input type="password" class="form-control" id="re_password" name="re_password">
            </div>
            <div class="form-group">
                <em style="color: red;">*</em>
                <label for="email">邮箱：</label>
                <input type="email" class="form-control" onblur="check_value('{:url('api/user/checkEmail')}', '#email')" id="email" name="email" placeholder="请输入邮箱">
            </div>
            <div class="form-group">
                <em style="color: red;">*</em>
                <label for="phone">手机：</label>
                <input type="text" class="form-control" onblur="check_value('{:url('api/user/checkPhone')}', '#phone')" id="phone" name="phone" placeholder="请输入手机">
            </div>
            <button type="submit" class="btn btn-default">注册</button>
        </form>
        <p id="error_msg" style="color:red;"></p>
        <p>已经有账号了？去<a href="{:url('login/index')}">登录</a>吧</p>
    </div>
</div>
<script>
    function check_value(url, name){
        //获取输入值
        var value = $(name).val();
        var data = {
            'value': value
        };
        $.post(url, data, function(result){
            if(result.status == 0){
                $('#error_msg').html(result.msg);
            }
        }, 'json')
    }
</script>
</body>
</html>